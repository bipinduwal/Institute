"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{287:function(e,r,t){t.d(r,{M:function(){return g}});var a=t(5893),o=t(3717),s=t(7747),i=t(5460),l=t(3468),n=t(7294),d=t(864),c=t.n(d),m=t(7423);function g(e,r,t,a,o,s,i){r-=128,o||i?s?e-=16:e-=448:s?e-=90:e-=300;let l=t/a,n=t,d=a;return n>e&&(d=(n=e)/l),d>r&&(n=(d=r)*l),{displayWidth:n,displayHeight:d}}let h=e=>{let{assetUrl:r,width:t,height:i,isSkinny:l}=e;return(0,a.jsx)(o.k,{w:"100%",align:"center",justify:"center",children:(0,a.jsx)(s.xu,{as:"video",src:r,autoPlay:!0,playsInline:!0,controls:!0,loop:!0,borderRadius:"16px",width:"".concat(t,"px"),height:"".concat(i,"px"),objectFit:"contain",mt:l?"1.5rem":"0",onContextMenu:e=>e.preventDefault()})})},p=e=>{let{assetUrl:r,width:t,height:s,isSkinny:l}=e;return(0,a.jsx)(o.k,{align:"center",justify:"center",children:(0,a.jsx)(i.E,{src:r,alt:"image",borderRadius:"16px",width:t?"".concat(t,"px"):"100%",height:s?"".concat(s,"px"):"100%",maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain",mt:l?"1.5rem":"0",draggable:!1})})},x=e=>{let{assetUrl:r,originalUrl:t,width:d,height:m,isSkinny:g}=e,[h,p]=(0,n.useState)(!0);return(0,a.jsxs)(o.k,{w:"100%",align:"center",justify:"center",position:"relative",children:[h&&(0,a.jsx)(s.xu,{borderRadius:"16px",width:"".concat(d,"px"),height:"".concat(m,"px"),objectFit:"contain",overflow:"hidden",mt:g?"1.5rem":"0",onContextMenu:e=>e.preventDefault(),children:(0,a.jsx)(c(),{leftImage:r,rightImage:t,sliderLineColor:"#e7e7ea",sliderPositionPercentage:.9,handleSize:30})}),!h&&(0,a.jsx)(i.E,{src:r,alt:"image",borderRadius:"16px",width:"".concat(d,"px"),height:"".concat(m,"px"),objectFit:"contain",mt:g?"1.5rem":"0",draggable:!1}),(0,a.jsx)(o.k,{bg:"grayAlpha.800",borderRadius:"16px",h:"2rem",w:"7rem",position:"absolute",top:g?"1.5rem":"0",right:"0",align:"center",justify:"center",cursor:"pointer",children:(0,a.jsx)(l.X,{size:"md",isChecked:h,onChange:()=>p(!h),h:"100%",w:"100%",px:"1rem",textColor:"gray.200",fontSize:"16px",children:"Compare"})})]})},u=e=>{let{asset:r,isMobile:t,isModal:o}=e,{width:s,height:i}=(0,m.ZP)(),l=s<800||t,n="turbo_image"===r.assetType||"import_image"===r.assetType,d=n&&r.originalUrl,{displayWidth:c,displayHeight:u}=g(s,i,r.width,r.height,t,l,o);return n?d?(0,a.jsx)(x,{assetUrl:r.assetUrl,originalUrl:r.originalUrl,width:c,height:u,isSkinny:l}):(0,a.jsx)(p,{assetUrl:r.assetUrl,width:c,height:u,isSkinny:l}):(0,a.jsx)(h,{assetUrl:r.assetUrl,width:c,height:u,isSkinny:l})};r.Z=u},413:function(e,r,t){t.d(r,{Ao:function(){return rt}});var a=t(5893),o=t(5689),s=t(7423),i=t(6486),l=t(7294);let n=(e,r)=>{let[t,a]=(0,l.useState)(),o=(0,l.useCallback)(()=>(0,i.filter)(e,e=>{let a=(0,i.lowerCase)(JSON.stringify(r?e[r]:e));return(null==a?void 0:a.indexOf((0,i.lowerCase)(t)))>-1}),[e,t,r]),s=e=>{a(e)};return{data:o(),onSearch:s}};var d=t(3606),c=t(1163),m=t(9820),g=t(3717),h=t(1136),p=t(8533),x=t(2708),u=t(7963),y=t(1293),b=t(5460),j=t(2916),f=t(2091);let v=e=>{let{asset:r,focusRef:t,setUploadImage:o,setMode:s,onClose:i}=e,n=(0,u.p)(),[d,m]=(0,l.useState)(!1),{asPath:h}=(0,c.useRouter)(),p=async()=>{try{var e,a;let l;if(m(!0),r.faceFeaturesUrl&&r.submissionTime>1716490824e3){let e=await fetch(r.faceFeaturesUrl);if(200!==e.status)throw Error("Reuse reference person failed unexpectedly, please try again");l=await e.json()}else throw Error("Could not reuse this reference person.");null==o||o({key:r.referenceKey,uuid:r.referenceUuid,url:r.referenceUrl,faceFeatures:l,faceFeaturesKey:r.faceFeaturesKey}),m(!1),null==s||s("reference"),null==t||null===(e=t.current)||void 0===e||e.focus(),null==t||null===(a=t.current)||void 0===a||a.scrollIntoView(),i()}catch(e){m(!1),n({title:e.message,status:"error",duration:5e3,isClosable:!0,position:"top"})}};return r.referenceKey?(0,a.jsxs)(g.k,{flexDir:"column",alignItems:"start",m:"0.5rem",borderRadius:"0.5rem",p:"0.25rem",children:[(0,a.jsx)(y.x,{textColor:"gray.800",_dark:{textColor:"gray.400"},fontSize:"lg",mb:"0.5rem",userSelect:"none",children:"Reference person"}),(0,a.jsx)(g.k,{pos:"relative",children:(0,a.jsx)(b.E,{src:r.referenceUrl,alt:"Image",borderRadius:"0.5rem",maxH:"8rem",mb:"0.5rem"})}),h.includes("create")&&(0,a.jsx)(g.k,{flexDir:"row",alignItems:"center",children:(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",onClick:p,isDisabled:d,children:[(0,a.jsx)(f.Xws,{}),(0,a.jsx)(y.x,{ml:"0.5rem",fontSize:"md",children:"Reuse reference"})]})})]}):(0,a.jsx)(a.Fragment,{})};var w=t(4659),k=t(5541),C=t(3589),S=t(4581),_=t(6205),z=t(287),T=t(215),R=t(4958);let I=e=>{let{asset:r}=e,t=(r.creativity/R.xP*10).toFixed(0);return -1===r.creativity?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)(g.k,{flexDir:"column",align:"center",justify:"center",h:"3rem",w:"12rem",mb:"1rem",children:[(0,a.jsx)(y.x,{_dark:{textColor:"gray.300"},textColor:"gray.800",fontSize:"md",mb:"0.75rem",userSelect:"none",w:"100%",textAlign:"center",children:"Upscale creativity: ".concat(t)}),(0,a.jsx)(T.iR,{min:R.FB,max:R.xP,step:.1,w:"10rem",value:r.creativity,cursor:"default",children:(0,a.jsx)(T.Uj,{h:"1.1rem",children:(0,a.jsx)(T.Ms,{color:"primary"})})})]})};var A=t(7879),E=t(6948),F=t(6204);let D=e=>{let{asset:r,isSkinny:t,setPrompt:o,setSeed:s,setGenerateMode:i,setOriginalSeed:l,setOriginalPrompt:n,setAspectRatio:d,onModalClose:m,reuseFocusRef:h}=e,{push:p,asPath:x}=(0,c.useRouter)(),u=()=>{let e=r.seed;"imageSeed"in r&&(e=r.imageSeed),e<=0&&(e=Math.floor(Math.random()*(A.Di-A.KZ)+A.KZ));let t="wide";if(r.height/r.width>1?t="tall":r.height/r.width==1&&(t="square"),x.startsWith("/create")){if(s&&s(e),o&&o(r.prompt),i&&i("turbo"),l&&l(e),n&&n(r.prompt),d&&d(t),m&&m(),h){var a,c;null===(a=h.current)||void 0===a||a.focus(),null===(c=h.current)||void 0===c||c.scrollIntoView()}return}let g=r.prompt,u=new URLSearchParams;u.set("prompt",g),u.set("seed",e.toString()),u.set("mode","turbo"),u.set("aspectRatio",t);let y=btoa(u.toString());p(y?"/create?params=".concat(y):"/create")};return r.prompt?(0,a.jsxs)(g.k,{flexDir:"column",alignItems:"start",m:"0.5rem",borderRadius:"0.5rem",p:"0.25rem",pb:"0",mb:t?"0.5rem":"0",children:[(0,a.jsx)(y.x,{_dark:{textColor:"gray.400"},textColor:"gray.800",fontSize:"lg",mb:"0.5rem",userSelect:"none",children:"Prompt"}),(0,a.jsx)(y.x,{fontSize:"lg",_dark:{textColor:"gray.200"},textColor:"gray.600",mb:"0.5rem",wordBreak:"break-word",children:r.prompt}),(0,a.jsxs)(j.z,{variant:"outline",size:"md",fontSize:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",onClick:u,children:[(0,a.jsx)(E.J,{as:F.dou}),(0,a.jsx)(y.x,{ml:"0.5rem",children:"Reuse prompt"})]})]}):null};var U=t(7219),P=t(4588);let M=e=>{let{isPrev:r,selectedAsset:t,assets:o,setSelectedAsset:s,isSkinny:i,fetchAssets:l}=e,n=()=>{let e=o.findIndex(e=>e.assetKey===t.assetKey);r?e=Math.max(0,e-1):(e=Math.min(o.length-1,e+1),l&&l(e)),s(o[e])};return i?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(j.z,{onClick:n,size:"md",colorScheme:"gray",_dark:{bg:"gray.700",_hover:{bg:"gray.600"}},bg:"gray.300",_hover:{bg:"gray.400"},height:"3.5rem",width:"2.25rem",pos:"absolute",left:r?"-3rem":"",right:r?"":"-3rem",top:"calc(50% - 1.75rem)",children:r?(0,a.jsx)(U.w,{boxSize:"1.5rem",color:"gray.600",_dark:{color:"gray.400"}}):(0,a.jsx)(P.X,{boxSize:"1.5rem",color:"gray.600",_dark:{color:"gray.400"}})})};var O=t(6319);let K=e=>{let{asset:r,setUploadImage:t,setMode:o,reuseFocusRef:s,onClose:i}=e,{asPath:l,push:n}=(0,c.useRouter)(),d=()=>{if(l.includes("create")){if(t&&t({key:r.assetKey,uuid:r.uuid,url:r.assetUrl,height:r.height,width:r.width}),o&&o("upload"),s){var e,a;null===(e=s.current)||void 0===e||e.focus(),null===(a=s.current)||void 0===a||a.scrollIntoView()}i();return}let d=new URLSearchParams(l);d.set("uuid",r.uuid),d.set("mode","upload");let c=btoa(d.toString());n(c?"/create?params=".concat(c):"/create"),i()};return(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",onClick:d,children:[(0,a.jsx)(f.H3h,{size:"1rem"}),(0,a.jsx)(y.x,{ml:"0.5rem",fontSize:"md",children:"Reuse image"})]})};var J=t(2915),W=t(1679),L=t(9754),Z=t(2730),H=t(1365),N=t(151),G=t(4325),q=t(5281),V=t(2883),Q=t(9993),Y=t(9893);let B=e=>{let{watermark:r,asset:t,setJobInProgress:o,onModalClose:s,accountDetails:i}=e,[n,d]=(0,l.useState)(!1),[c,h]=(0,l.useState)(R.bA),{isOpen:p,onToggle:x,onClose:u}=(0,Z.q)(),b=null==i?void 0:i.planType,v="none"===b?0:Number((null==i?void 0:i.refillVideoCredits)||0),w=Number((null==i?void 0:i.videoCredits)||0)+v,k=(null==i?void 0:i.planType)=="pro"||w>1,C=async()=>{let e;n||(d(!0),"stable_video"===t.assetType?e={type:J.O.UpscaleSv,sourceVideo:t.assetKey,sourceImage:t.imageKey,sourceUuid:t.imageUuid,thumbnailKey:t.thumbnailKey,motion:t.motion,width:t.width,height:t.height,posPrompt:t.prompt,seed:t.imageSeed,referenceUuid:t.referenceUuid,referenceKey:t.referenceKey,faceFeaturesKey:t.faceFeaturesKey,stationId:t.stationId}:(e={type:J.O.UpscaleImage,seed:t.seed,posPrompt:t.prompt,height:t.height,width:t.width,sourceImage:t.assetKey,watermark:r,stationId:t.stationId,creativity:c},"reference"===t.mode&&(e.referenceKey=t.referenceKey,e.referenceUuid=t.referenceUuid,e.faceFeaturesKey=t.faceFeaturesKey)),await fetch("/api/jobs/submitJob?projectId=".concat(t.projectId),{method:"POST",body:JSON.stringify(e)}),o(!0),(0,m.JG)("/api/jobs/listJobs?projectId=".concat(t.projectId)),d(!1),s())};return t.upscaled?(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",isDisabled:n,cursor:"default",border:"none",_hover:{bg:"transparent"},children:[(0,a.jsx)(E.J,{as:f.PcH,h:"1rem",w:"1rem"}),(0,a.jsx)(y.x,{ml:"0.25rem",fontSize:"md",children:"Upscaled"})]}):"stable_video"===t.assetType?(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",isDisabled:n,onClick:C,children:[(0,a.jsx)(f.PcH,{size:"1rem"}),(0,a.jsx)(y.x,{ml:"0.25rem",fontSize:"md",children:"Upscale"})]}):(0,a.jsxs)(H.J,{isOpen:p,onClose:u,placement:"top",children:[(0,a.jsx)(N.x,{children:(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",onClick:x,children:[(0,a.jsx)(f.PcH,{size:"1rem"}),(0,a.jsx)(y.x,{ml:"0.25rem",fontSize:"md",children:"Upscale"})]})}),(0,a.jsx)(G.y,{bg:"transparent",p:"0",m:"0",border:"none",w:"max-content",children:k?(0,a.jsxs)(g.k,{pos:"relative",borderRadius:"0.5rem",bg:"white",border:"1px solid",borderColor:"gray.800",_dark:{bg:"gray.700",borderColor:"whiteAlpha.300"},align:"center",justify:"center",h:"2rem",children:[(0,a.jsx)(y.x,{pos:"absolute",left:"50%",bottom:"2.5rem",w:"max-content",transform:"translateX(-50%)",fontSize:"15px",borderRadius:"0.5rem",border:"1px",background:"white",borderColor:"gray.700",_dark:{background:"gray.800"},zIndex:2,flexDir:"row",align:"center",opacity:"1",px:"0.5rem",py:"0.1rem",children:"Upscale creativity: ".concat(10*c)}),(0,a.jsx)(Q.h,{h:"100%",m:"0rem",p:"0rem",variant:"ghost","aria-label":"Cancel",onClick:u,children:(0,a.jsx)(W.T,{boxSize:"1rem",color:"gray.400"})}),(0,a.jsxs)(T.iR,{min:R.FB,max:R.xP,step:.1,w:"11rem",cursor:"col-resize",value:c,onChange:e=>h(e),children:[(0,a.jsx)(T.Uj,{h:"1.1rem",children:(0,a.jsx)(T.Ms,{color:"primary"})}),(0,a.jsx)(T.gs,{w:"4px",h:"1.2rem",autoFocus:!1})]}),(0,a.jsx)(Q.h,{h:"100%","aria-label":"Generate",m:"0rem",p:"0rem",variant:"ghost",onClick:C,isDisabled:n,children:(0,a.jsx)(L.n,{boxSize:"1rem",color:"green.300"})})]}):(0,a.jsxs)(q.K,{pos:"relative",borderRadius:"0.5rem",bg:"white",border:"1px solid",borderColor:"gray.300",_dark:{bg:"gray.700",borderColor:"whiteAlpha.300"},align:"center",justify:"center",p:"1rem",h:"100%",children:[(0,a.jsx)(y.x,{fontSize:"14px",color:"gray.800",_dark:{color:"gray.300"},children:"Upgrade to upscale"}),(0,a.jsx)(V.r,{href:"/pricing",children:(0,a.jsx)(j.z,{variant:"solid",colorScheme:"primary",fontSize:"16px",borderRadius:"0.5rem",w:"100%",onClick:()=>{Y.ZP.capture("Upgrade clicked",{referrer:"Upscale image credits"})},children:"Upgrade"})})]})})]})};var X=t(7747),$=t(80),ee=t(2303);let er=e=>{let{asset:r,onModalClose:t,deleteAsset:o}=e,{isOpen:s,onOpen:i,onClose:l}=(0,Z.q)(),n=e=>{e.shiftKey?d():i()},d=()=>{o(),l(),t()},c="asset";return"turbo_image"===r.assetType?c="image":"stable_video"===r.assetType&&(c="video"),(0,a.jsxs)(H.J,{placement:"bottom",isOpen:s,onClose:l,children:[(0,a.jsx)(N.x,{children:(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",borderRadius:"0.5rem",p:"0.75rem",mt:"0.5rem",onClick:e=>n(e),bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"red.500"},_dark:{bg:"gray.700",borderColor:"gray.600",_hover:{bg:"gray.600"}},children:[(0,a.jsx)(E.J,{as:f.Xm5,color:"red.500"}),(0,a.jsx)(y.x,{ml:"0.5rem",textColor:"red.500",fontSize:"md",children:"Delete"})]})}),(0,a.jsxs)(G.y,{_dark:{bg:"gray.900"},bg:"white",w:"100%",p:"1rem",maxW:"16rem",children:[(0,a.jsx)(ee.Q,{}),(0,a.jsx)(y.x,{fontSize:"lg",textAlign:"center",textColor:"gray.800",_dark:{textColor:"gray.200"},children:"Delete ".concat(c)}),(0,a.jsx)(y.x,{fontSize:"md",textAlign:"center",textColor:"gray.600",_dark:{textColor:"gray.400"},mt:"0.5rem",children:"Are you sure you want to delete this ".concat(c,"? This cannot be undone.")}),(0,a.jsxs)(g.k,{w:"100%",mt:"1rem",align:"center",justify:"center",children:[(0,a.jsx)(j.z,{variant:"outline",colorScheme:"gray",size:"md",onClick:l,mx:"0.25rem",borderRadius:"0.5rem",_dark:{textColor:"gray.300",borderColor:"gray.600"},textColor:"gray.800",borderColor:"gray.300",fontSize:"md",children:"Cancel"}),(0,a.jsx)(j.z,{variant:"solid",colorScheme:"red",size:"md",onClick:d,mx:"0.25rem",borderRadius:"0.5rem",fontSize:"md",children:"Delete"})]})]})]})};var et=t(1818);let ea=e=>{let{asset:r}=e,[t,o]=(0,l.useState)(!1),s=async()=>{Y.ZP.capture("Download image",{location:"Preview modal",type:"stable_video"});let e=document.createElement("a");e.href=r.assetUrl;let t=r.assetKey.split(".")[1];e.download="".concat(r.prompt.slice(0,195),".").concat(t),e.click()},i=async()=>{Y.ZP.capture("Download video",{location:"Preview modal",type:"stable_video"});let e=document.createElement("a");e.href=r.assetUrl;let t=r.assetKey.split(".")[1];e.download="".concat(r.prompt.slice(0,195),".").concat(t),e.click()},n=async()=>{o(!0),"turbo_image"===r.assetType?await s():await i(),o(!1)};return(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",isDisabled:t,onClick:n,children:[(0,a.jsx)(et.yYs,{size:"1.1rem"}),(0,a.jsx)(y.x,{ml:"0.5rem",fontSize:"md",children:"Download"})]})},eo=e=>{let{asset:r,favoriteAsset:t}=e;return(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",onClick:t,children:[r.favorite?(0,a.jsx)(E.J,{as:f.$0H,color:"red"}):(0,a.jsx)(E.J,{as:f.BgW}),(0,a.jsx)(y.x,{ml:"0.5rem",fontSize:"md",children:"Favorite"})]})},es=e=>{let{asset:r}=e,{isOpen:t,onOpen:o,onClose:s}=(0,Z.q)(),i=()=>{Y.ZP.capture("Share link",{location:"Preview modal"});let e=window.location.origin,t="".concat(e,"/share/").concat(r.uuid);try{navigator.share({title:"Decohere - ".concat(r.prompt||"Untitled"),url:t})}catch(e){navigator.clipboard.writeText(t),o()}},l="Share link to this ";return l="turbo_image"===r.assetType?"image":"video",(0,a.jsxs)(H.J,{placement:"bottom",isOpen:t,onClose:s,children:[(0,a.jsx)(N.x,{children:(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",onClick:i,children:[(0,a.jsx)(f.Lrt,{size:"1rem"}),(0,a.jsx)(y.x,{ml:"0.5rem",fontSize:"md",children:"Share"})]})}),(0,a.jsxs)(G.y,{bg:"gray.100",_dark:{bg:"gray.900"},w:"100%",p:"0.5rem",children:[(0,a.jsx)(y.x,{p:"0.5rem",px:"1rem",fontSize:"lg",textAlign:"center",_dark:{color:"gray.200"},color:"gray.800",children:"Share link copied to clipboard"}),(0,a.jsxs)(y.x,{color:"gray.600",maxW:"14rem",textAlign:"center",mb:"1rem",_dark:{color:"gray.400"},children:["Anyone with the link will be able to view and download this"," ",l]})]})]})},ei=e=>{let{selectedAsset:r,favoriteAsset:t,deleteAsset:o,onModalClose:s,setJobInProgress:i,accountDetails:l,reuseFocusRef:n,setUploadImage:d,setMode:c}=e;return(0,a.jsxs)(g.k,{flexDir:"row",flexWrap:"wrap",alignItems:"center",pl:"0.75rem",pr:"0.5rem",w:"100%",mb:"0.5rem",children:["edited"in r&&r.edited&&(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",borderRadius:"0.5rem",p:"0.75rem",mr:"0.5rem",mt:"0.5rem",cursor:"default",border:"none",_hover:{bg:"transparent"},children:[(0,a.jsx)(E.J,{as:$.zmo,h:"1.2rem",w:"1.2rem"}),(0,a.jsx)(y.x,{ml:"0.25rem",fontSize:"md",children:"Edited"})]}),(0,a.jsx)(B,{accountDetails:l,watermark:"none"===l.planType,asset:r,onModalClose:s,setJobInProgress:i}),(0,a.jsx)(eo,{asset:r,favoriteAsset:()=>t(r)}),("turbo_image"===r.assetType||"import_image"===r.assetType)&&(0,a.jsx)(K,{reuseFocusRef:n,asset:r,setUploadImage:d,setMode:c,onClose:s}),(0,a.jsx)(ea,{asset:r}),(0,a.jsx)(es,{asset:r}),"stationId"in r&&(0,a.jsx)(X.xu,{mt:"0.5rem",children:(0,a.jsx)(O.E,{stationId:r.stationId})}),(0,a.jsx)(er,{asset:r,onModalClose:s,deleteAsset:()=>o(r)})]})},el=e=>{let{asset:r,setGenerateMode:t,setUploadImage:o,onModalClose:s,reuseFocusRef:i}=e,{asPath:l}=(0,c.useRouter)(),n=()=>{if("imageKey"in r&&l.includes("create")){if(t&&t("upload"),o&&o({key:r.imageKey,uuid:r.imageUuid,height:r.height,width:r.width}),i){var e,a;null===(e=i.current)||void 0===e||e.focus(),null===(a=i.current)||void 0===a||a.scrollIntoView()}s&&s()}},d=async()=>{if(!("imageKey"in r))return;Y.ZP.capture("Download image",{location:"Preview modal",type:"turbo_image"});let e=document.createElement("a");e.href=r.assetUrl;let t=r.assetKey.split(".")[1];e.download="".concat(r.prompt.slice(0,195),".").concat(t),e.click()};return"imageKey"in r?(0,a.jsxs)(g.k,{flexDir:"column",alignItems:"start",m:"0.5rem",borderRadius:"0.5rem",p:"0.25rem",children:[(0,a.jsx)(y.x,{_dark:{textColor:"gray.400"},textColor:"gray.800",fontSize:"lg",mb:"0.5rem",userSelect:"none",children:"Starting image"}),(0,a.jsx)(g.k,{pos:"relative",children:(0,a.jsx)(b.E,{src:r.thumbnailUrl,alt:"Image",borderRadius:"0.5rem",maxH:"8rem",mb:"0.5rem"})}),(0,a.jsxs)(g.k,{flexDir:"row",alignItems:"center",gap:"0.5rem",children:[l.includes("create")&&(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",onClick:n,children:[(0,a.jsx)(f.H3h,{}),(0,a.jsx)(y.x,{ml:"0.5rem",fontSize:"md",children:"Reuse image"})]}),(0,a.jsxs)(j.z,{variant:"outline",size:"md",colorScheme:"gray",borderRadius:"0.5rem",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},p:"0.75rem",onClick:d,children:[(0,a.jsx)(et.yYs,{size:"1.1rem"}),(0,a.jsx)(y.x,{ml:"0.5rem",fontSize:"md",children:"Download"})]})]})]}):(0,a.jsx)(a.Fragment,{})},en=e=>{let{next:r,hasMore:t,assets:o,accountDetails:i,selectedAsset:n,setSelectedAsset:d,modalOpen:c,onModalClose:m,setJobInProgress:h,isMobile:p,favoriteAsset:x,deleteAsset:u,setPrompt:b,setSeed:j,setGenerateMode:f,setUploadImage:T,setOriginalSeed:R,setOriginalPrompt:A,setAspectRatio:E,reuseFocusRef:F}=e,{width:U,height:P}=(0,s.ZP)(),O=U<800||p,K=(0,l.useRef)(n),J=(null==n?void 0:n.submissionTime)?new Date(n.submissionTime).toLocaleString():"";async function W(e){e>=o.length-3&&t&&r&&await r()}(0,l.useEffect)(()=>{K.current=n},[n]),(0,l.useEffect)(()=>{if(!c)return;let e=e=>{if("ArrowLeft"===e.key){let e=o.findIndex(e=>{var r;return e.assetKey===(null===(r=K.current)||void 0===r?void 0:r.assetKey)});d(o[e=Math.max(0,e-1)])}else if("ArrowRight"===e.key){let e=o.findIndex(e=>{var r;return e.assetKey===(null===(r=K.current)||void 0===r?void 0:r.assetKey)});e=Math.min(o.length-1,e+1),d(o[e]),W(e)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o,c]);let{displayWidth:L}=(0,z.M)(U,P,(null==n?void 0:n.width)||0,(null==n?void 0:n.height)||0,p,O,!0);return n?(0,a.jsxs)(k.u_,{isOpen:c,onClose:m,isCentered:!0,allowPinchZoom:!0,children:[(0,a.jsx)(C.Z,{bg:"whiteAlpha.500",_dark:{bg:"blackAlpha.500"},backdropFilter:"blur(20px)"}),(0,a.jsxs)(S.h,{maxH:"90vh",w:O?"":"calc(".concat(L,"px) + 16rem"),maxW:O?"100vw":"calc(100vw - 8rem)",border:"1px",borderColor:"gray.200",bg:"white",_dark:{borderColor:"gray.700",bg:"gray.800"},borderRadius:"0.5rem",containerProps:{zIndex:9999},children:[(0,a.jsx)(_.o,{border:0,cursor:"pointer",size:"lg",mt:"-0.25rem",mr:"-0.5rem",color:"gray.800",_focus:{boxShadow:"none"},_dark:{color:"gray.100"}}),(0,a.jsxs)(g.k,{p:O?"0.25rem":"1rem",flexDir:O?"column":"row",alignItems:"start",objectFit:"contain",borderRadius:"0.5rem",pt:O?"2rem":"1rem",bg:"white",_dark:{bg:"gray.800"},children:[(0,a.jsx)(z.Z,{asset:n,isMobile:p,isModal:!0}),(0,a.jsxs)(g.k,{flexDir:"column",alignItems:"start",w:O?"100%":"16rem",minW:"16rem",children:[O&&(0,a.jsx)(ei,{accountDetails:i,deleteAsset:u,favoriteAsset:x,onModalClose:m,selectedAsset:n,setJobInProgress:h,reuseFocusRef:F,setUploadImage:T,setMode:f}),(0,a.jsx)(D,{isSkinny:O,asset:n,setPrompt:b,setSeed:j,setGenerateMode:f,onModalClose:m,reuseFocusRef:F,setOriginalSeed:R,setOriginalPrompt:A,setAspectRatio:E}),(0,a.jsx)(el,{asset:n,setGenerateMode:f,setUploadImage:T,onModalClose:m,reuseFocusRef:F}),(0,a.jsx)(v,{asset:n,focusRef:F,setUploadImage:T,setMode:f,onClose:m}),"motion"in n&&(0,a.jsx)(w.Z,{motion:n.motion,setMotion:()=>{},selectable:!1}),"creativity"in n&&(0,a.jsx)(I,{asset:n}),!O&&(0,a.jsx)(ei,{setJobInProgress:h,accountDetails:i,deleteAsset:u,favoriteAsset:x,onModalClose:m,selectedAsset:n,reuseFocusRef:F,setUploadImage:T,setMode:f}),(0,a.jsxs)(y.x,{_dark:{textColor:"gray.400"},textColor:"gray.500",fontSize:"sm",mb:"0.5rem",mx:"0.75rem",fontWeight:500,children:["import_image"===n.assetType?"Uploaded on":"Created on"," ",J]})]}),(0,a.jsx)(M,{isPrev:!0,selectedAsset:n,assets:o,setSelectedAsset:d,isSkinny:O}),(0,a.jsx)(M,{isPrev:!1,selectedAsset:n,assets:o,setSelectedAsset:d,isSkinny:O,fetchAssets:W})]})]})]}):null},ed=e=>{let{asset:r,deleteAsset:t}=e,{isOpen:o,onOpen:s,onClose:i}=(0,Z.q)(),l="asset";return"turbo_image"===r.assetType?l="image":"stable_video"===r.assetType&&(l="video"),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.k,{pos:"absolute",bottom:"0.25rem",left:"0.25rem",onClick:e=>{e.shiftKey?t(r):s()},bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",borderColor:"red.500",_dark:{bg:"gray.900",borderColor:"red.500"}},border:"1px",borderColor:"gray.300",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",zIndex:2,children:(0,a.jsx)(E.J,{as:f.Xm5,size:"1rem",color:"red.500"})}),(0,a.jsxs)(k.u_,{isOpen:o,onClose:i,isCentered:!0,size:"xs",children:[(0,a.jsx)(C.Z,{bg:"blackAlpha.500",backdropFilter:"blur(20px)"}),(0,a.jsx)(S.h,{border:"1px",borderColor:"gray.300",borderRadius:"0.5rem",_dark:{borderColor:"gray.700"},children:(0,a.jsxs)(g.k,{bg:"white",_dark:{bg:"black"},p:"1rem",flexDir:"column",borderRadius:"0.5rem",children:[(0,a.jsx)(y.x,{fontSize:"lg",color:"gray.800",_dark:{color:"gray.200"},children:"Delete ".concat(l)}),(0,a.jsx)(y.x,{my:"0.5rem",fontSize:"md",color:"gray.700",_dark:{color:"gray.400"},children:"Are you sure you want to delete this ".concat(l,"? This cannot be undone.")}),(0,a.jsxs)(g.k,{justify:"flex-end",children:[(0,a.jsx)(j.z,{onClick:i,variant:"outline",colorScheme:"gray",children:"Cancel"}),(0,a.jsx)(j.z,{variant:"solid",onClick:()=>{t(r),i()},ml:"0.5rem",colorScheme:"red",children:"Delete"})]})]})})]})]})},ec=e=>{let{asset:r}=e;async function t(){Y.ZP.capture("Download image",{location:"Library thumbnail",type:"turbo_image"});let e=document.createElement("a");e.href=r.assetUrl;let t=r.assetKey.split(".")[1];e.download="".concat(r.prompt.slice(0,195),".").concat(t),e.click()}async function o(){Y.ZP.capture("Download video",{location:"Library thumbnail",type:"stable_video"});let e=document.createElement("a");e.href=r.assetUrl;let t=r.assetKey.split(".")[1];e.download="".concat(r.prompt.slice(0,195),".").concat(t),e.click()}async function s(){"turbo_image"===r.assetType?await t():await o()}return(0,a.jsx)(g.k,{pos:"absolute",bottom:"0.25rem",right:"3rem",onClick:s,bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",_dark:{bg:"gray.900"}},border:"1px",borderColor:"gray.300",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",zIndex:2,children:(0,a.jsx)(E.J,{as:et.yYs,h:"1.25rem",w:"1.25rem",color:"black",_dark:{color:"white"}})})},em=e=>{let{asset:r,favoriteAsset:t}=e;return(0,a.jsx)(g.k,{pos:"absolute",top:"0.25rem",left:"0.25rem",onClick:()=>t(r),bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",_dark:{bg:"gray.900"}},border:"1px",borderColor:"gray.300",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",zIndex:2,children:r.favorite?(0,a.jsx)(E.J,{as:f.$0H,color:"red"}):(0,a.jsx)(E.J,{as:f.BgW,color:"black",_dark:{color:"white"}})})},eg=e=>{let{asset:r}=e,t=(0,u.p)();return(0,a.jsx)(g.k,{pos:"absolute",bottom:"0.25rem",right:"0.25rem",onClick:function(){Y.ZP.capture("Share link",{location:"Library thumbnail"});let e=window.location.origin,o="".concat(e,"/share/").concat(r.uuid);try{navigator.share({title:"Decohere - ".concat(r.prompt||"Untitled"),url:o})}catch(e){navigator.clipboard.writeText(o),t({title:"Share link copied to clipboard",duration:5e3,isClosable:!0,icon:(0,a.jsx)(et.wk9,{size:"1.3rem"})})}},bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",_dark:{bg:"gray.900"}},border:"1px",borderColor:"gray.300",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",zIndex:2,children:(0,a.jsx)(E.J,{as:f.Lrt,h:"1.25rem",w:"1.25rem",color:"black",_dark:{color:"white"}})})},eh=e=>{let{imageAspectRatio:r,imageSize:t,asset:o,onSelect:s,hovered:i,isMobile:l}=e;return(0,a.jsx)(x.df,{triggerOnce:!0,children:e=>{let{ref:n,inView:d}=e;return(0,a.jsx)(b.E,{loading:d?"eager":"lazy","fetch-priority":d?"high":"low",ref:n,id:"video",alt:"video",border:"1px",borderColor:i?"gray.500":"transparent",_dark:{borderColor:i?"primary.500":"transparent"},cursor:"pointer",borderRadius:"0.5rem",height:ep[t][l?"mobile":"desktop"][r].height,width:ep[t][l?"mobile":"desktop"][r].width,objectFit:"contain",src:o.thumbnailUrl,fallbackSrc:"/empty-frame.webp",fallbackStrategy:"onError",draggable:"false",onClick:s,onContextMenu:e=>e.preventDefault()})}})},ep={small:{desktop:{wide:{height:"calc(11.25rem + 2px)",width:"calc(20rem + 2px)"},square:{height:"calc(12.3rem + 2px)",width:"calc(12.3rem + 2px)"},tall:{height:"calc(21.8rem + 2px)",width:"calc(12.28rem + 2px)"}},mobile:{wide:{height:"calc(6.05rem + 2px)",width:"calc(10.75rem + 2px)"},square:{height:"calc(10.8rem + 2px)",width:"calc(10.8rem + 2px)"},tall:{height:"calc(19.1rem + 2px)",width:"calc(10.75rem + 2px)"}}},medium:{desktop:{wide:{height:"calc(14.175rem + 2px)",width:"calc(25.2rem + 2px)"},square:{height:"calc(16.6rem + 2px)",width:"calc(16.6rem + 2px)"},tall:{height:"calc(25.15rem + 2px)",width:"calc(14.15rem + 2px)"}},mobile:{wide:{height:"calc(14.175rem + 2px)",width:"calc(25.2rem + 2px)"},square:{height:"calc(14.15rem + 2px)",width:"calc(14.15rem + 2px)"},tall:{height:"calc(25.15rem + 2px)",width:"calc(14.15rem + 2px)"}}},large:{desktop:{wide:{height:"calc(19rem + 2px)",width:"calc(33.75rem + 2px)"},square:{height:"calc(25.2rem + 2px)",width:"calc(25.2rem + 2px)"},tall:{height:"calc(35.56rem + 2px)",width:"calc(20rem + 2px)"}},mobile:{wide:{height:"calc(12.375rem + 2px)",width:"calc(22rem + 2px)"},square:{height:"calc(22rem + 2px)",width:"calc(22rem + 2px)"},tall:{height:"calc(39.1rem + 2px)",width:"calc(22rem + 2px)"}}}},ex=e=>{let{asset:r}=e;return(0,a.jsx)(g.k,{pos:"absolute",top:"0.25rem",right:"0.25rem",bg:"white",border:"1px",borderColor:"gray.200",_dark:{bg:"black",borderColor:"gray.800"},h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",children:"stable_video"===r.assetType?(0,a.jsx)(f.KoQ,{}):(0,a.jsx)(f.H3h,{})})},eu=e=>{let{asset:r}=e;return r.upscaled?(0,a.jsx)(g.k,{pos:"absolute",top:"0.25rem",bg:"white",border:"1px",borderColor:"gray.200",_dark:{bg:"black",borderColor:"gray.800"},right:"3rem",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",align:"center",justify:"center",children:(0,a.jsx)(f.PcH,{size:"1rem"})}):(0,a.jsx)(a.Fragment,{})},ey=(0,l.memo)(e=>{let{isMobile:r,asset:t,accountDetails:o,onSelect:s,favoriteAsset:i,deleteAsset:n,imageSize:d,imageAspectRatio:c}=e,[m,h]=(0,l.useState)(!1),p="none"===o.planType&&r;return(0,a.jsxs)(X.xu,{m:"4px",pos:"relative",cursor:"pointer",onContextMenu:e=>e.preventDefault(),onMouseEnter:()=>{r||h(!0)},onMouseLeave:()=>{r||h(!1)},bg:"gray.200",_dark:{bg:"gray.800"},borderRadius:"0.5rem",userSelect:"none",height:ep[d][r?"mobile":"desktop"][c].height,width:ep[d][r?"mobile":"desktop"][c].width,children:[(0,a.jsx)(eh,{imageAspectRatio:c,imageSize:d,isMobile:r,asset:t,hovered:m,onSelect:s}),p&&(0,a.jsx)(g.k,{pos:"absolute",opacity:"0",h:"100%",w:"100%",top:"0px",zIndex:1,onClick:s,onContextMenu:e=>e.preventDefault(),userSelect:"none"}),m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(em,{asset:t,favoriteAsset:i}),(0,a.jsx)(eg,{asset:t}),(0,a.jsx)(ec,{asset:t}),(0,a.jsx)(ed,{asset:t,deleteAsset:n}),(0,a.jsx)(eu,{asset:t})]}),(0,a.jsx)(ex,{asset:t})]})});ey.displayName="AssetThumbnail";var eb=t(9638),ej=t(5324),ef=t(9870);let ev=e=>{let{submissionTime:r,projectId:t,setIsDeleted:o,status:s}=e,i=(0,u.p)(),{isOpen:l,onOpen:n,onClose:d}=(0,Z.q)(),c=async()=>{try{let e=await fetch("/api/jobs/cancelJob?submissionTime=".concat(r,"&projectId=").concat(t),{method:"POST",headers:{"Content-Type":"application/json"}}),a=await e.json();if(e.ok)o(!0);else throw Error(null==a?void 0:a.message)}catch(e){i({title:"".concat(e),status:"error",duration:5e3,isClosable:!0,position:"top"})}},m=e=>{e.shiftKey?c():n()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.k,{pos:"absolute",right:"0.25rem",top:"0.25rem",h:"2rem",w:"2.5rem",maxH:"2rem",maxW:"2.5rem",p:"0px",borderRadius:"0.5rem",cursor:"pointer",bg:"white",_dark:{bg:"black",borderColor:"gray.700"},_hover:{bg:"gray.300",_dark:{bg:"gray.900"}},border:"1px",borderColor:"gray.300",onClick:m,align:"center",justify:"center",display:"queued"===s?"flex":"none",children:(0,a.jsx)(F._0w,{size:"1rem",color:"#dc4a41"})}),(0,a.jsxs)(k.u_,{isOpen:l,onClose:d,isCentered:!0,size:"xs",children:[(0,a.jsx)(C.Z,{bg:"whiteAlpha.500",_dark:{bg:"blackAlpha.500"},backdropFilter:"blur(20px)"}),(0,a.jsx)(S.h,{border:"1px",borderColor:"gray.200",borderRadius:"0.5rem",overflow:"hidden",_dark:{borderColor:"gray.700"},children:(0,a.jsxs)(g.k,{bg:"white",p:"1rem",flexDir:"column",borderRadius:"0.5rem",_dark:{bg:"gray.800"},children:[(0,a.jsx)(y.x,{fontSize:"lg",textColor:"gray.700",_dark:{textColor:"gray.200"},children:"Cancel Job"}),(0,a.jsx)(y.x,{my:"0.5rem",fontSize:"md",color:"gray.700",_dark:{color:"gray.400"},children:"Are you sure you want to cancel this job? This cannot be undone."}),(0,a.jsxs)(g.k,{justify:"flex-end",children:[(0,a.jsx)(j.z,{onClick:d,variant:"outline",colorScheme:"gray",children:"Cancel"}),(0,a.jsx)(j.z,{variant:"solid",onClick:async()=>{await c(),d()},ml:"0.5rem",colorScheme:"red",children:"Confirm"})]})]})})]})]})},ew=e=>{let r,{job:t,imageSize:s,imageAspectRatio:i}=e,[n,d]=(0,l.useState)(0),c=(0,ef.Z)("/api/assets/getS3Object?projectId=".concat(t.projectId,"&key=").concat(t.srcImageKey)).data,m=(0,o.Z)(),[h,p]=(0,l.useState)(!1);if(t.type===J.O.UpscaleImage)r=65;else{let e=void 0===t.friendlyName||""===t.friendlyName;r=e?45:25}(0,l.useEffect)(()=>{let e=setInterval(()=>{0===t.startTime?d(0):d(Math.min(99,(Date.now()-t.startTime)/(1e3*r)*100))},1e3);return()=>clearInterval(e)},[r,t.startTime]);let x=0===t.startTime?"Queued...":"".concat(n.toFixed(0),"%");return(0,a.jsxs)(g.k,{display:h?"none":"flex",m:"0.25rem",height:ep[s][m?"mobile":"desktop"][i].height,width:ep[s][m?"mobile":"desktop"][i].width,border:"1px",borderColor:"gray.600",onContextMenu:e=>e.preventDefault(),alignItems:"center",justifyContent:"center",borderRadius:"0.5rem",position:"relative",_hover:{borderColor:"primary.400"},children:[c&&(0,a.jsx)(b.E,{pos:"absolute",alt:"image",objectFit:"cover",height:ep[s][m?"mobile":"desktop"][i].height,width:ep[s][m?"mobile":"desktop"][i].width,src:c.presignedUrl,style:{filter:"blur(2px) brightness(50%)"}}),(0,a.jsx)(ej.D,{value:n,color:"primary.500",size:m?"5.5rem":"7.5rem",thickness:"3px",trackColor:"gray.200"}),(0,a.jsx)(y.x,{noOfLines:1,w:"4.5rem",position:"absolute",fontSize:m?"14px":"1rem",textAlign:"center",userSelect:"none",color:"gray.100",children:x}),(0,a.jsx)(ev,{submissionTime:t.submissionTime,projectId:t.projectId,status:t.status,setIsDeleted:p})]})},ek=async e=>{let{projectId:r,lastEvaluatedKey:t,pageSize:a,assetTypes:o}=e,s=await fetch("/api/assets/listAssets?projectId=".concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageSize:a,lastEvaluatedKey:t,assetTypes:o||["stable_video","turbo_image","import_image"]})});if(!s.ok)return{items:[],lastEvaluatedKey:void 0};let i=await s.json();return i},eC=e=>{let{projectId:r,assets:t,jobInProgress:o,setJobInProgress:s,dispatchAssets:i,assetFilterConfig:n}=e,d=(0,m.ZP)("/api/jobs/listJobs?projectId=".concat(r),{refreshInterval:o?3e3:0}).data;return(0,l.useEffect)(()=>{if(!d)return;let e=(0,eb.J)(d,J.O.StableVideo,J.O.UpscaleImage,J.O.UpscaleSv);e.length>0?s(!0):setTimeout(()=>{s(!1)},6e3)},[d]),(0,l.useEffect)(()=>{let e=null,t=async()=>{let e=await ek({projectId:r,lastEvaluatedKey:void 0,pageSize:rr});i({type:"ADD_DATA",payload:{data:e.items,prepend:!0}})};return o&&(t(),e=setInterval(t,3e3)),()=>{e&&clearInterval(e)}},[o,r,n.viewFavorites]),(0,a.jsx)(l.Fragment,{children:null==d?void 0:d.map(e=>{let r=t.data.some(r=>r.submissionTime===e.submissionTime);return r?null:(0,a.jsx)(ew,{imageSize:n.imageSize,imageAspectRatio:n.imageAspectRatio,job:e},"".concat(e.submissionTime,"-").concat(e.type))})})},eS=e=>{let{isMobile:r,assets:t,modifiedAssets:o,dispatchAssets:s,accountDetails:i,assetFilterConfig:n,jobInProgress:d,setPrompt:c,setSeed:m,setGenerateMode:u,setUploadImage:y,setOriginalSeed:b,setOriginalPrompt:j,setAspectRatio:f,reuseFocusRef:v}=e,w="".concat(null==i?void 0:i.customerId,"-stablevideo"),[k,C]=(0,l.useState)(void 0),S=t.data.length||0,[_,z]=(0,l.useState)(!1),{ref:T,inView:R}=(0,x.YD)({triggerOnce:!1,threshold:1}),I=e4[n.assetsFilterType];(0,l.useEffect)(()=>{void 0!==d&&z(d)},[d]),(0,l.useEffect)(()=>{R&&!t.loading&&t.key&&A(t.key,n.viewFavorites,1)},[R,t.loading,t.key]);let A=async(e,r,a)=>{if(e||s({type:"SET_KEY",payload:""}),t.loading||!e)return;s({type:"SET_LOADING",payload:!0});let o=await ek({projectId:w,lastEvaluatedKey:e,pageSize:r?rr*Math.min(a,32):rr});s({type:"ADD_DATA",payload:{data:o.items,prepend:!1}}),s({type:"SET_KEY",payload:o.lastEvaluatedKey}),s({type:"SET_LOADING",payload:!1});let i=o.items.filter(e=>!!e.prompt.includes(n.searchQuery)&&re(e,n.viewFavorites,I));0==i.length&&await A(o.lastEvaluatedKey,!0,8*a)},E=async e=>{let r=e.favorite,a=[...t.data],o=t.data.find(r=>r.uuid===e.uuid);if(!o)return;o.favorite=!r,s({type:"SET_DATA",payload:[...t.data]}),k&&C({...k,favorite:!r});let i=await fetch("/api/assets/favoriteAsset?projectId=".concat(w),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assetType:e.assetType,submissionTime:e.submissionTime,favorite:!r})});i.ok||s({type:"SET_DATA",payload:a})},F=async e=>{let r=[...t.data],a=[...t.data].filter(r=>r.assetKey!==e.assetKey);s({type:"SET_DATA",payload:a});let o=await fetch("/api/assets/deleteAsset?projectId=".concat(w),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assetType:e.assetType,submissionTime:e.submissionTime})});o.ok||s({type:"SET_DATA",payload:r})},D=e=>{C(e)},U=o.filter(e=>"upscaled"!==n.assetResolution||e.upscaled);return(0,a.jsxs)(l.Fragment,{children:[(0,a.jsx)(p.Z,{dataLength:S,next:async()=>await A(t.key,n.viewFavorites,1),hasMore:!!t.key,scrollableTarget:"scrollableDiv",loader:(0,a.jsx)(g.k,{flexDir:"column",width:"100%",align:"center",children:(0,a.jsx)(g.k,{flexWrap:"wrap",justify:"center",children:(0,a.jsx)(h.$,{ref:T,size:"md",color:"gray.500",m:"20px"})})}),scrollThreshold:.8,children:(0,a.jsx)(g.k,{flexDir:"column",width:"100%",align:"center",children:(0,a.jsxs)(g.k,{flexWrap:"wrap",justify:"center",id:"asset-library",children:[(0,a.jsx)(eC,{jobInProgress:_,setJobInProgress:z,projectId:w,dispatchAssets:s,assets:t,assetFilterConfig:n}),o&&i&&U.map(e=>(0,a.jsx)(ey,{imageAspectRatio:n.imageAspectRatio,imageSize:n.imageSize,isMobile:r,asset:e,accountDetails:i,onSelect:()=>D(e),favoriteAsset:E,deleteAsset:F},"".concat(e.submissionTime,"-").concat(e.assetType)))]})})}),i&&(0,a.jsx)(en,{reuseFocusRef:v,setPrompt:c,setSeed:m,setGenerateMode:u,setUploadImage:y,setOriginalSeed:b,setOriginalPrompt:j,setAspectRatio:f,accountDetails:i,setJobInProgress:z,assets:U,selectedAsset:k,setSelectedAsset:C,modalOpen:!!k,onModalClose:()=>C(void 0),next:async()=>await A(t.key,n.viewFavorites,1),hasMore:!!t.key,isMobile:r,deleteAsset:F,favoriteAsset:E})]})};var e_=t(6854);let ez=e=>{let{assetFilterConfig:r,isMobile:t}=e;return(0,a.jsx)(l.Fragment,{children:(0,a.jsx)(g.k,{flexDir:"column",width:"100%",align:"center",pt:"66px",children:(0,a.jsx)(g.k,{flexDir:"row",flexWrap:"wrap",width:"100%",justify:"center",gap:"0.5rem",children:Array(rr).fill(1).map((e,o)=>(0,a.jsx)(e_.O,{borderRadius:"0.5rem",height:ep[r.imageSize][t?"mobile":"desktop"][r.imageAspectRatio].height,width:ep[r.imageSize][t?"mobile":"desktop"][r.imageAspectRatio].width},o))})})})},eT=e=>{let{assetFilterConfig:r}=e,t="No ".concat(e9[r.assetsFilterType]," found");return r.searchQuery.length>0&&(t+=' with prompt "'.concat(r.searchQuery,'"')),r.viewFavorites&&(t+=" in Favorites"),(0,a.jsx)(g.k,{height:"100%",width:"100%",align:"center",justify:"center",children:(0,a.jsx)(y.x,{wordBreak:"break-word",color:"gray.700",textAlign:"center",_dark:{color:"gray.200"},children:t})})};var eR=t(7239);let eI=()=>(0,a.jsxs)(eR.M,{flexDir:"column",height:"100%",width:"100%",gap:"1rem",children:[(0,a.jsx)(y.x,{color:"gray.800",_dark:{color:"gray.200"},children:"Log in to view your library"}),(0,a.jsxs)(j.z,{variant:"solid",borderRadius:"0.5rem",onClick:()=>{window.location.href="/api/auth/login"},textColor:"gray.200",h:"2rem",fontSize:"15px",children:["Log in",(0,a.jsx)(E.J,{as:f.IPB,height:"18px",width:"18px",color:"gray.200",display:"flex",alignItems:"center",ml:"0.5rem"})]})]});function eA(e,r){switch(r.type){case"SET_DATA":return{...e,data:r.payload};case"SET_LOADING":return{...e,loading:r.payload};case"SET_KEY":return{...e,key:r.payload};case"ADD_DATA":let t=r.payload.data.filter(r=>!e.data.some(e=>e.submissionTime===r.submissionTime));return{...e,data:r.payload.prepend?[...t,...e.data]:[...e.data,...t]};default:return e}}let eE=()=>{let[e,r]=(0,l.useReducer)(eA,{data:[],loading:!0,key:""});return{assets:e,dispatchAssets:r}};var eF=t(6147),eD=t(6712),eU=t(1170),eP=t(4040),eM=t(2311),eO=t(8689),eK=t(2658),eJ=t(1121);let eW={all:(0,a.jsx)(E.J,{as:f.tdI,h:"18px",w:"18px"}),images:(0,a.jsx)(E.J,{as:f.H3h,h:"15px",w:"15px"}),videos:(0,a.jsx)(E.J,{as:et.Uyb,h:"15px",w:"15px"}),uploads:(0,a.jsx)(E.J,{as:eJ.d7P,h:"15px",w:"15px"})},eL={all:(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[(0,a.jsx)(f.tdI,{size:"18px",color:"gray.200"}),(0,a.jsx)("span",{children:"All media"})]}),images:(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[(0,a.jsx)(f.H3h,{size:"15px",color:"gray.200"}),(0,a.jsx)("span",{children:"Images"})]}),videos:(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[(0,a.jsx)(et.Uyb,{size:"15px",color:"gray.200"}),(0,a.jsx)("span",{children:"Videos"})]}),uploads:(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[(0,a.jsx)(eJ.d7P,{size:"15px",color:"gray.200"}),(0,a.jsx)("span",{children:"Uploads"})]})},eZ={normal:(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[(0,a.jsx)(f.tdI,{size:"18px",color:"gray.200"}),(0,a.jsx)("span",{children:"All media"})]}),upscaled:(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[(0,a.jsx)(f.PcH,{size:"15px",color:"gray.200"}),(0,a.jsx)("span",{children:"Upscaled"})]})},eH=(0,l.forwardRef)((e,r)=>{let{isMobile:t,...o}=e;return(0,a.jsx)(j.z,{...o,ref:r,border:"1px",p:t?"8px":"1rem",pr:t?"2px":"1rem",height:"34px",borderRadius:"0.5rem",_hover:{borderColor:"gray.400",bgColor:"gray.200"},_active:{backgroundColor:"gray.200"},color:"black",bg:"gray.100",borderColor:"gray.300",_dark:{bg:"gray.800",color:"white",borderColor:"gray.700",_hover:{borderColor:"gray.600"},_active:{backgroundColor:"gray.800"}},width:t?"60px":"180px",minW:t?"60px":"180px",maxW:t?"60px":"180px"})});eH.displayName="AssetLibraryControlsMenuButton";let eN=e=>{let{assetsFilterType:r,setAssetsFilterType:t,isMobile:o,setViewFavorites:s,setAssetResolution:i,assetResolution:n}=e,[d,c]=(0,l.useState)("everything"),[m,h]=(0,l.useState)(!1),p=e=>{s("everything"!==e),c(e)},x=()=>h(!m);return(0,a.jsxs)(eD.v,{isOpen:m,onOpen:x,onClose:x,closeOnSelect:!1,children:[(0,a.jsx)(eU.j,{as:eH,isMobile:o,rightIcon:(0,a.jsx)(eF.v,{height:"18px",width:"18px",__css:{transition:"all 0.2s",transform:m?"rotate(180deg)":"rotate(0deg)"}}),children:o?eW[r]:eL[r]}),(0,a.jsxs)(eP.q,{mt:"0rem",bg:"gray.100",borderColor:"gray.300",_dark:{bg:"gray.800",borderColor:"gray.700"},zIndex:3,minW:"180px",children:[(0,a.jsxs)(eM._,{title:"Group",value:d,onChange:p,type:"radio",children:[(0,a.jsx)(eO.i,{value:"everything",children:(0,a.jsxs)(g.k,{align:"center",gap:"8px",color:"gray.800",_dark:{color:"gray.200"},children:[(0,a.jsx)(E.J,{as:$.khG,h:"16px",w:"16px"}),(0,a.jsx)("span",{children:"Everything"})]})}),(0,a.jsx)(eO.i,{value:"favorites",children:(0,a.jsxs)(g.k,{align:"center",gap:"8px",color:"gray.800",_dark:{color:"gray.200"},children:[(0,a.jsx)(E.J,{as:f.BgW,h:"15px",w:"15px"}),(0,a.jsx)("span",{children:"Favorites"})]})})]}),(0,a.jsx)(eK.R,{}),(0,a.jsx)(eM._,{title:"Type",value:r,onChange:e=>{t(e)},type:"radio",children:Object.keys(eL).map(e=>(0,a.jsx)(eO.i,{value:e,color:"gray.800",_dark:{color:"gray.200"},children:eL[e]},e))}),(0,a.jsx)(eK.R,{}),(0,a.jsx)(eM._,{title:"Resolution",type:"radio",value:n,onChange:e=>{i(e)},children:Object.keys(eZ).map(e=>(0,a.jsx)(eO.i,{value:e,color:"gray.800",_dark:{color:"gray.200"},children:eZ[e]},e))})]})]})};var eG=t(8633),eq=t(4758);let eV=()=>(0,a.jsxs)("svg",{height:"15px",width:"15px",viewBox:"0 -10 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"56",height:"30",rx:"6",stroke:"currentColor",strokeWidth:"6"}),(0,a.jsx)("rect",{x:"12.5",y:"39.5",width:"37",height:"3",rx:"1.5",stroke:"currentColor",strokeWidth:"3"})]}),eQ=()=>(0,a.jsxs)("svg",{height:"15px",width:"15px",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"13",y:"3",width:"30",height:"58",rx:"6",stroke:"currentColor",strokeWidth:"6"}),(0,a.jsx)("rect",{x:"15",y:"9",width:"6",height:"2",rx:"1",stroke:"currentColor",strokeWidth:"2"})]}),eY=e=>{switch(e){case"9:16":return(0,a.jsx)(E.J,{as:eQ});case"1:1":return(0,a.jsx)(E.J,{as:f.hGI});case"16:9":return(0,a.jsx)(E.J,{as:eV});default:return null}},eB={wide:"16:9",square:"1:1",tall:"9:16"},eX=e=>{let{isMobile:r,imageSize:t,setImageSize:o,imageAspectRatio:s,setImageAspectRatio:n}=e,[d,c]=(0,l.useState)(!1),m=e=>{localStorage.setItem("".concat(eq.IQ,"-imageSize"),e),o(e)},h=e=>{localStorage.setItem("".concat(eq.IQ,"-aspectRatio"),e),n(e)},p=()=>c(!d),x={small:e=>(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[r?(0,a.jsx)(E.J,{as:eG.lTV,h:"15px",w:"15px"}):(0,a.jsx)(E.J,{as:eG.qY1,h:"15px",w:"15px"}),e?(0,a.jsx)("span",{children:"Small"}):!r&&(0,a.jsx)("span",{children:"Small"})]}),medium:e=>(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[(0,a.jsx)(E.J,{as:eG.lTV,h:"15px",w:"15px"}),e?(0,a.jsx)("span",{children:"Medium"}):!r&&(0,a.jsx)("span",{children:"Medium"})]}),large:e=>(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[(0,a.jsx)(E.J,{as:f.u9M,h:"15px",w:"15px"}),e?(0,a.jsx)("span",{children:"Large"}):!r&&(0,a.jsx)("span",{children:"Large"})]})};return(0,a.jsxs)(eD.v,{isOpen:d,onOpen:p,onClose:p,closeOnSelect:!1,children:[(0,a.jsx)(eU.j,{as:eH,isMobile:r,rightIcon:(0,a.jsx)(eF.v,{height:"18px",width:"18px",__css:{transition:"all 0.2s",transform:d?"rotate(180deg)":"rotate(0deg)"}}),children:x[t](!1)}),(0,a.jsxs)(eP.q,{mt:"0rem",bg:"gray.100",borderColor:"gray.300",_dark:{bg:"gray.800",borderColor:"gray.700"},zIndex:3,minW:"180px",children:[(0,a.jsx)(eM._,{color:"gray.800",_dark:{color:"gray.200"},title:"Thumbnail size",value:t,onChange:m,type:"radio",children:Object.keys(x).map(e=>r&&"medium"==e?null:(0,a.jsx)(eO.i,{value:e,color:"gray.800",_dark:{color:"gray.200"},children:x[e](!0)},e))}),(0,a.jsx)(eK.R,{}),(0,a.jsx)(eM._,{color:"gray.800",_dark:{color:"gray.200"},value:s,onChange:h,title:"Layout",type:"radio",children:Object.keys(eB).map(e=>(0,a.jsx)(eO.i,{value:e,color:"gray.800",_dark:{color:"gray.200"},children:(0,a.jsxs)(g.k,{align:"center",gap:"8px",children:[eY(eB[e]),(0,a.jsx)("span",{children:(0,i.upperFirst)(e)})]})},e))})]})]})};var e$=t(7116),e0=t(3683),e1=t(3090),e5=t(2735);let e2=e=>{let{searchQuery:r,handleSearch:t,isMobile:o}=e,s=(0,l.useRef)(null);return(0,a.jsx)(g.k,{children:(0,a.jsxs)(e0.B,{children:[(0,a.jsx)(e1.I,{ref:s,value:r,border:"1px",borderRadius:"0.5rem",borderColor:"gray.300",bg:"gray.100",_dark:{bg:"gray.800",borderColor:"gray.700",_active:{backgroundColor:"gray.800",borderColor:"gray.700"},_selected:{borderColor:"gray.700"},_hover:{borderColor:"gray.700"},_focus:{borderColor:"gray.700"}},placeholder:"Search for media...",fontSize:o?"16px":"small",_active:{borderColor:"gray.400",bg:"gray."},_selected:{borderColor:"gray.400",bg:"gray.200"},_hover:{borderColor:"gray.400",bg:"gray.200"},_focus:{borderColor:"gray.400",bg:"gray.200"},w:o?"100%":"250px",minW:o?"100%":"250px",maxW:o?"100%":"250px",height:"34px",onChange:t,style:{transition:"all 0.5s"}}),(0,a.jsx)(e5.x,{children:(0,a.jsx)(Q.h,{isRound:!0,"aria-label":"Clear search",variant:"unstyled",size:"sm",onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.focus()},icon:(0,a.jsx)(e$.W,{color:"gray.800",_dark:{color:"gray.300"}})})})]})})},e3=e=>{let{isMobile:r,assetFilterConfig:t,dispatchAssetFilterConfig:o,handleSearch:s}=e;return(0,a.jsx)(X.xu,{position:"sticky",top:0,zIndex:3,w:"100%",children:(0,a.jsxs)(g.k,{p:4,pl:r?"1rem":"26px",pr:r?"1rem":"26px",gap:"8px",justify:"space-between",flexDirection:r?"row-reverse":"row",bgColor:"white",_dark:{bgColor:"black"},maxW:"100vw",children:[(0,a.jsxs)(g.k,{gap:"8px",children:[(0,a.jsx)(eN,{isMobile:r,assetsFilterType:t.assetsFilterType,setAssetsFilterType:e=>o({type:"SET_ASSETS_FILTER_TYPE",payload:e}),setViewFavorites:e=>o({type:"SET_VIEW_FAVORITES",payload:e}),assetResolution:t.assetResolution,setAssetResolution:e=>o({type:"SET_ASSET_RESOLUTION",payload:e})}),(0,a.jsx)(eX,{imageSize:t.imageSize,setImageSize:e=>o({type:"SET_IMAGE_SIZE",payload:e}),isMobile:r,imageAspectRatio:t.imageAspectRatio,setImageAspectRatio:e=>o({type:"SET_IMAGE_ASPECT_RATIO",payload:e})})]}),(0,a.jsx)(e2,{searchQuery:t.searchQuery,handleSearch:s,isMobile:r})]})})},e8={assetsFilterType:"all",imageSize:"small",imageAspectRatio:"wide",searchQuery:"",viewFavorites:!1,assetResolution:"normal"};function e6(e,r){switch(r.type){case"SET_ASSETS_FILTER_TYPE":return{...e,assetsFilterType:r.payload};case"SET_IMAGE_SIZE":return{...e,imageSize:r.payload};case"SET_IMAGE_ASPECT_RATIO":return{...e,imageAspectRatio:r.payload};case"SET_SEARCH_QUERY":return{...e,searchQuery:r.payload};case"SET_VIEW_FAVORITES":return{...e,viewFavorites:r.payload};case"SET_ASSET_RESOLUTION":return{...e,assetResolution:r.payload};default:return e}}let e7=()=>{let[e,r]=(0,l.useReducer)(e6,e8);return{assetFilterConfig:e,dispatchAssetFilterConfig:r}},e4={all:"all",images:"turbo_image",videos:"stable_video",uploads:"import_image"},e9={all:"media",images:"image",videos:"video",uploads:"uploaded image"},re=(e,r,t)=>r?"all"==t?e.favorite:e.favorite&&e.assetType==t:"all"==t||e.assetType==t,rr=25,rt=e=>{let{initAccountDetails:r,isMobile:t,jobInProgress:o,setPrompt:s,setSeed:i,setGenerateMode:g,setUploadImage:h,setOriginalSeed:p,setOriginalPrompt:x,setAspectRatio:u,reuseFocusRef:y}=e,{user:b}=(0,d.aF)(),{asPath:j}=(0,c.useRouter)(),[f,v]=(0,l.useState)(r),{data:w}=(0,m.ZP)(b?"/api/accountDetails":null,{refreshInterval:6e4,revalidateOnMount:!0}),k="".concat(null==f?void 0:f.customerId,"-stablevideo");(0,l.useEffect)(()=>{w&&v(w)},[w]);let{assets:C,dispatchAssets:S}=eE(),{assetFilterConfig:_,dispatchAssetFilterConfig:z}=e7(),{data:T,onSearch:R}=n(C.data,"prompt"),I=e4[_.assetsFilterType],A=T.filter(e=>re(e,_.viewFavorites,I)),E=e=>{let r=e.target.value;R(r),z({type:"SET_SEARCH_QUERY",payload:r})};(0,l.useEffect)(()=>{let e=async()=>{S({type:"SET_LOADING",payload:!0});let e=await ek({projectId:k,lastEvaluatedKey:void 0,pageSize:rr});S({type:"SET_KEY",payload:e.lastEvaluatedKey}),S({type:"SET_DATA",payload:e.items}),S({type:"SET_LOADING",payload:!1})};r&&D&&e()},[o]);let F=C.loading&&0==C.data.length,D=!C.key&&0==A.length;return j.includes("/create")&&0==C.data.length?null:f?(0,a.jsx)(a.Fragment,{children:F?(0,a.jsx)(ez,{isMobile:t,assetFilterConfig:_}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e3,{isMobile:t,assetFilterConfig:_,dispatchAssetFilterConfig:z,handleSearch:E}),D?(0,a.jsx)(eT,{assetFilterConfig:_}):(0,a.jsx)(eS,{reuseFocusRef:y,setPrompt:s,setSeed:i,setGenerateMode:g,setUploadImage:h,setOriginalSeed:p,setOriginalPrompt:x,setAspectRatio:u,jobInProgress:o,accountDetails:f,dispatchAssets:S,assets:C,modifiedAssets:A,assetFilterConfig:_,isMobile:t})]})}):(0,a.jsx)(eI,{})}},6319:function(e,r,t){t.d(r,{E:function(){return m}});var a=t(5893),o=t(7395),s=t(2916),i=t(5460),l=t(1293),n=t(1664),d=t.n(n),c=t(9820);let m=e=>{let{stationId:r}=e,t=r&&r!==o.Ss,{data:n}=(0,c.ZP)(t?"/api/explore/getStation?uuid=".concat(r):null);if(!r)return null;let m=r===o.Ss?"/explore":"/station/".concat(r),g=(null==n?void 0:n.coverArtUrl)||o.hR;return(0,a.jsx)(d(),{href:m,children:(0,a.jsxs)(s.z,{variant:"outline",size:"md",colorScheme:"gray",bg:"gray.100",borderColor:"gray.300",_hover:{bg:"gray.200",borderColor:"gray.400"},_dark:{bg:"gray.700",_hover:{bg:"gray.600"},borderColor:"gray.600"},borderRadius:"0.5rem",p:"0.75rem",px:"0.5rem",mr:"0.5rem",children:[(0,a.jsx)(i.E,{src:g,alt:"Station Image",borderRadius:"0.25rem",objectFit:"cover",maxH:"1.5rem",w:"1.5rem"}),(0,a.jsx)(l.x,{ml:"0.5rem",fontSize:"md",children:"Go to station"})]})})}},4659:function(e,r,t){var a=t(5893),o=t(3717),s=t(1293),i=t(215);let l=e=>{let{motion:r,setMotion:t,selectable:l}=e,n="primary";return(0,a.jsxs)(o.k,{flexDir:"column",align:"center",justify:"center",h:"3rem",w:"12rem",mt:"0.5rem",children:[!l&&(0,a.jsx)(s.x,{textColor:"gray.800",_dark:{textColor:"gray.300"},fontSize:"md",mb:"0.75rem",userSelect:"none",w:"100%",textAlign:"center",children:"Video motion: ".concat((r/150*10).toFixed(1))}),(0,a.jsxs)(i.iR,{min:0,max:150,step:5,w:"10rem",value:r,onChange:function(e){l&&t(e)},colorScheme:n,cursor:l?"col-resize":"default",mb:l?"0rem":"1.5rem",children:[(0,a.jsx)(i.Uj,{h:"1.1rem",children:(0,a.jsx)(i.Ms,{color:n})}),l&&(0,a.jsx)(i.gs,{w:"4px",h:"1.2rem",opacity:l?"1":"0",autoFocus:!1})]}),l&&(0,a.jsx)(o.k,{flexDir:"row",align:"center",justify:"center",w:"100%",children:(0,a.jsx)(s.x,{color:"gray.400",fontSize:"14px",mt:l?"0rem":"0.5rem",children:"".concat((r/150*10).toFixed(1))})})]})};r.Z=l},9638:function(e,r,t){function a(e,r,t){if(!e||0===e.length)return!1;for(let a of e)if(a.type===r||t&&a.type===t)return!0;return!1}function o(e,r,t,a){if(!e||0===e.length)return[];let o=[];for(let s of e)s.type===r&&o.push(s),t&&s.type===t&&o.push(s),a&&s.type===a&&o.push(s);return o}t.d(r,{H:function(){return a},J:function(){return o}})}}]);